<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PrimeSnapsX Video</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    body { background-color: #ffffff; font-family: 'Segoe UI', sans-serif; }
    .hidden { display: none; }
    #page-content { transition: filter 0.3s ease-in-out; }
    @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
    .modal-content { animation: fadeIn 0.3s ease-out forwards; }
  </style>
</head>
<body class="bg-white">

<div id="app" class="w-full max-w-4xl mx-auto">
  <header class="bg-blue-600 text-white p-4 flex justify-between items-center shadow-md">
    <h1 class="text-2xl font-bold">PrimeSnapsX</h1>
    <div class="flex items-center space-x-4">
      <i class="fas fa-search cursor-pointer"></i>
      <div class="flex items-center space-x-2 cursor-pointer"><i class="fas fa-bars"></i><span>Menu</span></div>
    </div>
  </header>

  <div id="page-content">
    <div class="p-2 md:p-4">
        <h2 class="text-2xl font-bold text-gray-800 mb-3">Sample Video Title</h2>
        <div class="aspect-video bg-black rounded-lg overflow-hidden shadow-lg border border-gray-200">
          <video id="player" class="w-full h-full" controls playsinline webkit-playsinline crossorigin="anonymous" poster="https://i.imgur.com/8pXnU0b.jpg">
            <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" type="video/mp4">
          </video>
        </div>
        <div class="text-center my-4">
            <p class="text-red-600 font-bold text-lg">If Video not Load Please Watch on server 2</p>
            <a href="https://example.com/server-2" class="inline-block mt-2 px-8 py-3 bg-green-500 text-white font-bold text-lg rounded-md hover:bg-green-600">Play on Server 2</a>
        </div>
    </div>
  </div>

  <div id="unlockModal" role="dialog" class="fixed inset-0 flex items-center justify-center z-50 hidden">
    <div class="absolute inset-0 bg-black bg-opacity-70 backdrop-blur-md"></div>
    <div class="modal-content relative bg-gray-800 rounded-xl p-8 z-10 text-center shadow-2xl mx-4">
      <p class="mb-6 text-lg text-gray-200">After unlocking this video, if you don't find the video, please come back to this page.</p>
      <a id="unlockBtn" href="https://example.com/adult-link" class="inline-block px-8 py-3 bg-pink-600 text-white font-bold rounded-lg" target="_blank" rel="noopener noreferrer">Unlock Full Video</a>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    // URL se video ka unique ID nikalega (jaise ?id=my-video-123)
    const urlParams = new URLSearchParams(window.location.search);
    const VIDEO_ID = urlParams.get('id') || 'default_video_page'; // Har page ka alag ID hoga
    
    const SESSION_KEY = `popup_shown_${VIDEO_ID}`;
    const REQUIRED_MILLISECONDS = 60000; // 1 Minute

    const modal = document.getElementById('unlockModal');
    const pageContent = document.getElementById('page-content');
    const video = document.getElementById('player');

    function showModal() {
        localStorage.setItem(SESSION_KEY, 'true'); // Is video ke liye popup dikha diya
        pageContent.style.filter = 'blur(8px)';
        modal.classList.remove('hidden');
        if (!video.paused) { video.pause(); } // Agar video chal raha hai to pause kar do
    }

    // --- MAIN POPUP LOGIC (Guaranteed to work) ---
    // Pehle check karo ki is video ke liye popup show ho chuka hai ya nahi
    if (!localStorage.getItem(SESSION_KEY)) {
        console.log("Popup timer started for 1 minute.");
        // Agar nahi hua, to 1 minute ka timer laga do
        setTimeout(showModal, REQUIRED_MILLISECONDS);
    } else {
        console.log("Popup was already shown for this video session. No timer started.");
    }
});
</script>

</body>
</html>
